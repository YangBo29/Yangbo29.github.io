<!-- build time:Tue Jul 17 2018 20:08:58 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="theme-color" content="#000000"><meta http-equiv="window-target" content="_top"><title>gulp | Hexo</title><meta name="description" content="gulpglup 语法gulp.src(globs[, options]) 输出（Emits）符合所提供的匹配模式（glob）或者匹配模式的数组（array of globs）的文件。 将返回一个 Vinyl files 的 stream 它可以被 piped 到别的插件中globs : String 或 Arrayoptions ：Objectoptions.buffer ： Boolean 默"><meta name="keywords" content="js"><meta property="og:type" content="article"><meta property="og:title" content="gulp"><meta property="og:url" content="http://yoursite.com/2018/06/17/gulp/index.html"><meta property="og:site_name" content="我的博客"><meta property="og:description" content="gulpglup 语法gulp.src(globs[, options]) 输出（Emits）符合所提供的匹配模式（glob）或者匹配模式的数组（array of globs）的文件。 将返回一个 Vinyl files 的 stream 它可以被 piped 到别的插件中globs : String 或 Arrayoptions ：Objectoptions.buffer ： Boolean 默"><meta property="og:locale" content="zh-Hans"><meta property="og:updated_time" content="2018-07-17T08:41:30.386Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="gulp"><meta name="twitter:description" content="gulpglup 语法gulp.src(globs[, options]) 输出（Emits）符合所提供的匹配模式（glob）或者匹配模式的数组（array of globs）的文件。 将返回一个 Vinyl files 的 stream 它可以被 piped 到别的插件中globs : String 或 Arrayoptions ：Objectoptions.buffer ： Boolean 默"><link rel="canonical" href="http://yoursite.com/2018/06/17/gulp/index.html"><link rel="alternate" href="/atom.xml" title="我的博客" type="application/atom+xml"><link rel="icon" href="/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"></head><body class="main-center theme-green" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="slimContent"><div class="navbar-header"><div class="profile-block text-center"><a id="avatar" href="https://github.com/YangBo29" target="_blank"><img class="img-circle img-rotate" src="/images/avat.jpg" width="200" height="200"></a><h2 id="name" class="hidden-xs hidden-sm">杨波</h2><h3 id="title" class="hidden-xs hidden-sm hidden-md">人生总是要奋斗的</h3><small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> beijing, China</small></div><div class="search" id="search-form-wrap"><form class="search-form sidebar-form"><div class="input-group"><input type="text" class="search-form-input form-control" placeholder="Search"> <span class="input-group-btn"><button type="submit" class="search-form-submit btn btn-flat" onclick="return!1"><i class="icon icon-search"></i></button></span></div></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="Type something..." x-webkit-speech> <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div></div><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation"><ul class="nav navbar-nav main-nav"><li class="menu-item menu-item-home"><a href="/."><i class="icon icon-home-fill"></i> <span class="menu-title">Home</span></a></li><li class="menu-item menu-item-archives"><a href="/archives"><i class="icon icon-archives-fill"></i> <span class="menu-title">Archives</span></a></li></ul><ul class="social-links"><li><a href="https://github.com/YangBo29" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="https://weibo.com/u/3809860910" target="_blank" title="Weibo" data-toggle="tooltip" data-placement="top"><i class="icon icon-weibo"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul></nav></div></header><aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><div class="widget"><h3 class="widget-title">Board</h3><div class="widget-body"><div id="board"><p>您好，您是第<span id="busuanzi_value_site_uv">0</span>位访客</p><div class="content"><p>欢迎交流与分享经验!</p></div></div></div></div><div class="widget"><h3 class="widget-title">Categories</h3><div class="widget-body"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ant-Design/">ant Design</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/cropper/">cropper</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/gulp/">gulp</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/node/">node</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端框架/">前端框架</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/原生js/">原生js</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/正则/">正则</a><span class="category-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Tags</h3><div class="widget-body"><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/">node</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/">react</a><span class="tag-list-count">8</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Tag Cloud</h3><div class="widget-body tagcloud"><a href="/tags/js/" style="font-size:14px">js</a> <a href="/tags/node/" style="font-size:13px">node</a> <a href="/tags/react/" style="font-size:14px">react</a></div></div><div class="widget"><h3 class="widget-title">Archive</h3><div class="widget-body"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a><span class="archive-list-count">2</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Recent Posts</h3><div class="widget-body"><ul class="recent-post-list list-unstyled no-thumbnail"><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/ant-Design/">ant Design</a></p><p class="item-title"><a href="/2018/07/17/antDesign/" class="title">ant Design（1）</a></p><p class="item-date"><time datetime="2018-07-16T16:00:00.000Z" itemprop="datePublished">2018-07-17</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/cropper/">cropper</a></p><p class="item-title"><a href="/2018/07/07/jQuery.cropper/" class="title">jQuery.cropper 插件</a></p><p class="item-date"><time datetime="2018-07-06T16:00:00.000Z" itemprop="datePublished">2018-07-07</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/gulp/">gulp</a></p><p class="item-title"><a href="/2018/06/17/gulp/" class="title">gulp</a></p><p class="item-date"><time datetime="2018-06-16T16:00:00.000Z" itemprop="datePublished">2018-06-17</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/正则/">正则</a></p><p class="item-title"><a href="/2017/11/26/regExp/" class="title">RegExp</a></p><p class="item-date"><time datetime="2017-11-25T16:00:00.000Z" itemprop="datePublished">2017-11-26</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/前端框架/">前端框架</a></p><p class="item-title"><a href="/2017/11/12/middleWare/" class="title">MiddleWare</a></p><p class="item-date"><time datetime="2017-11-11T16:00:00.000Z" itemprop="datePublished">2017-11-12</time></p></div></li></ul></div></div></div></aside><aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><nav id="toc" class="article-toc"><h3 class="toc-title">Catalogue</h3><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#gulp"><span class="toc-number">1.</span> <span class="toc-text">gulp</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#glup-语法"><span class="toc-number">1.1.</span> <span class="toc-text">glup 语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用技巧-https-www-gulpjs-com-cn-docs-recipes-（官网）"><span class="toc-number">1.2.</span> <span class="toc-text">使用技巧 https://www.gulpjs.com.cn/docs/recipes/ （官网）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gulp-在项目中用到的一些插件"><span class="toc-number">1.3.</span> <span class="toc-text">gulp 在项目中用到的一些插件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#gulp-stylelint-（代码校验）"><span class="toc-number">1.3.1.</span> <span class="toc-text">gulp-stylelint （代码校验）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#gulp-sass-和-gulp-sourcemaps-（sass编译，源映射）"><span class="toc-number">1.3.2.</span> <span class="toc-text">gulp-sass 和 gulp-sourcemaps （sass编译，源映射）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#gulp-clean-css-（css压缩）"><span class="toc-number">1.3.3.</span> <span class="toc-text">gulp-clean-css （css压缩）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#gulp-imagemin-（图片压缩）"><span class="toc-number">1.3.4.</span> <span class="toc-text">gulp-imagemin （图片压缩）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#gulp-clean-（清除文件-文件夹）"><span class="toc-number">1.3.5.</span> <span class="toc-text">gulp-clean （清除文件/文件夹）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#gulp-connect-（动态监控文件变化）"><span class="toc-number">1.3.6.</span> <span class="toc-text">gulp-connect （动态监控文件变化）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#gulp-postcss-插件平台-类似于webpack中的plugins"><span class="toc-number">1.3.7.</span> <span class="toc-text">gulp-postcss (插件平台) [类似于webpack中的plugins]</span></a></li></ol></li></ol></li></ol></nav></div></aside><main class="main" role="main"><div class="content"><article id="post-gulp" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting"><div class="article-header"><h1 class="article-title" itemprop="name">gulp</h1><div class="article-meta"><span class="article-date"><i class="icon icon-calendar-check"></i> <a href="/2018/06/17/gulp/" class="article-date"><time datetime="2018-06-16T16:00:00.000Z" itemprop="datePublished">2018-06-17</time></a></span> <span class="article-category"><i class="icon icon-folder"></i> <a class="article-category-link" href="/categories/gulp/">gulp</a></span> <span class="article-tag"><i class="icon icon-tags"></i> <a class="article-tag-link" href="/tags/js/">js</a></span> <span class="article-read hidden-xs"><i class="icon icon-eye-fill" aria-hidden="true"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></span> <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2018/06/17/gulp/#comments" class="article-comment-link">Comments</a></span></div></div><div class="article-entry markdown-body" itemprop="articleBody"><h2 id="gulp"><a href="#gulp" class="headerlink" title="gulp"></a>gulp</h2><h3 id="glup-语法"><a href="#glup-语法" class="headerlink" title="glup 语法"></a>glup 语法</h3><blockquote><p>gulp.src(globs[, options]) 输出（Emits）符合所提供的匹配模式（glob）或者匹配模式的数组（array of globs）的文件。 将返回一个 Vinyl files 的 stream 它可以被 piped 到别的插件中</p><ul><li>globs : String 或 Array</li><li>options ：Object<ul><li>options.buffer ： Boolean 默认值： true</li><li>options.read ： Boolean 默认值： true</li><li>options.base ： String</li></ul></li></ul></blockquote><blockquote><p>gulp.dest(path[, options]) 能被 pipe 进来，并且将会写文件。并且重新输出（emits）所有数据，因此你可以将它 pipe 到多个文件夹。如果某文件夹不存在，将会自动创建它</p><ul><li>path : String or Function 文件将被写入的路径（输出目录）</li><li>options : Object</li></ul><ul><li>options.cwd : String 默认值： process.cwd() 输出目录的 cwd 参数，只在所给的输出目录是相对路径时候有效</li><li>options.mode : String 默认值： 0777 八进制权限字符，用以定义所有在输出目录中所创建的目录的权限。</li></ul></blockquote><blockquote><p>gulp.task(name[, deps], fn) 定义一个使用 编排器 实现的任务（task）</p><ul><li>name ：String 任务的名字，如果你需要在命令行中运行你的某些任务，那么，请不要在名字中使用空格</li><li>deps ： Array 一个包含任务列表的数组，这些任务会在你当前任务运行之前完成【前置依赖】</li><li>fn ： func 该函数定义任务所要执行的一些操作【支持异步任务】<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&gt; gulp.task(&apos;somename&apos;, function() &#123;</span><br><span class="line">  var stream = gulp.src(&apos;client/**/*.js&apos;)</span><br><span class="line">    .pipe(minify())</span><br><span class="line">    .pipe(gulp.dest(&apos;build&apos;));</span><br><span class="line">  return stream;</span><br><span class="line">&#125;)</span><br><span class="line">&gt; gulp.task(&apos;somename&apos;, function() &#123;</span><br><span class="line">  var deferred = Q.defer();</span><br><span class="line">  // 执行异步的操作</span><br><span class="line">  setTimeout(function() &#123;</span><br><span class="line">    deferred.resolve();</span><br><span class="line">  &#125;, 1);</span><br><span class="line">  return deferred.promise;</span><br><span class="line">&#125;);</span><br><span class="line">&gt; // 在gulp 执行任务的时候，task会以最大的并发数执行，也就是gulp 会一次性的执行所有的task 并且不会等待，所以如果你想创建一个序列化的task队列，并想按顺序执行，你需要做两步：</span><br><span class="line">&gt; // 1、给出一个提示，告诉task什么时候执行完毕</span><br><span class="line">&gt; // 2、给出一个提示，告知task 一来另外一个task 的完成</span><br><span class="line">&gt; </span><br><span class="line">&gt; // 返回一个 callback，因此系统可以知道它什么时候完成</span><br><span class="line">gulp.task(&apos;one&apos;, function(cb) &#123;</span><br><span class="line">    // 做一些事 -- 异步的或者其他的</span><br><span class="line">    cb(err); // 如果 err 不是 null 或 undefined，则会停止执行，且注意，这样代表执行失败了</span><br><span class="line">&#125;);</span><br><span class="line">// 定义一个所依赖的 task 必须在这个 task 执行之前完成</span><br><span class="line">gulp.task(&apos;two&apos;, [&apos;one&apos;], function() &#123;</span><br><span class="line">    // &apos;one&apos; 完成后</span><br><span class="line">&#125;);</span><br><span class="line">gulp.task(&apos;default&apos;, [&apos;one&apos;, &apos;two&apos;]);  // 创建一个有序执行的任务</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></li></ul></blockquote><blockquote><p>gulp.watch(glob [, opts], tasks) 或 gulp.watch(glob [, opts, cb])</p><blockquote><p>gulp.watch(glob[, opts], tasks)</p><ul><li>glob : String or Array 用来指定具体监控哪些文件的变动</li><li>opts : Object 传给 监视者 的参数</li><li>task : Array 需要在文件变动后执行的一个或者多个通过 gulp.task() 创建的 task 的名字</li></ul></blockquote><blockquote><p>gulp.watch(glob [, opts, cb])</p><ul><li>glob : String or Array 用来指定具体监控哪些文件的变动</li><li>opts : Object 传给 监视者 的参数</li><li>cb(event) : 每次变动需要执行的 callback<ul><li>callback 会被传入一个名为 event 的对象。这个对象描述了所监控到的变动</li><li>event.type ： String 发生的变动的类型：added, changed 或者 deleted</li><li>event.path ： String 触发了该事件的文件的路径</li></ul></li></ul></blockquote></blockquote><h3 id="使用技巧-https-www-gulpjs-com-cn-docs-recipes-（官网）"><a href="#使用技巧-https-www-gulpjs-com-cn-docs-recipes-（官网）" class="headerlink" title="使用技巧  https://www.gulpjs.com.cn/docs/recipes/ （官网）"></a>使用技巧 <a href="https://www.gulpjs.com.cn/docs/recipes/" target="_blank" rel="noopener">https://www.gulpjs.com.cn/docs/recipes/</a> （官网）</h3><h3 id="gulp-在项目中用到的一些插件"><a href="#gulp-在项目中用到的一些插件" class="headerlink" title="gulp 在项目中用到的一些插件"></a>gulp 在项目中用到的一些插件</h3><h4 id="gulp-stylelint-（代码校验）"><a href="#gulp-stylelint-（代码校验）" class="headerlink" title="gulp-stylelint （代码校验）"></a>gulp-stylelint （代码校验）</h4><blockquote><p>参数<br>failAfterError ： 当设置为true时，如果出现错误级别的警告，进程将以非零错误代码结束。默认值为true<br>reportOutputDir ：用于将lint结果写入文件系统的基本目录。当前工作目录的默认值<br>reporters ：配置对象列表。默认为空数组</p><ul><li>formatter ：结果格式化程序</li><li>save ：将格式化的结果保存到一个文件中</li><li>console ：格式化结果到控制台<br>debug ：当设置为true时，错误处理程序将打印错误堆栈跟踪。默认值为假<br>fix : 为true选项指示stylelint尽可能多地解决问题。这些修正被应用到gulp流中。可以将固定的内容保存到文件中<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">const stylelint = require(&apos;gulp-stylelint&apos;)</span><br><span class="line">// stylelint检测 </span><br><span class="line"></span><br><span class="line">// 作用： 统一代码风格，检查语法错误； 减少错误语法的出现率和git管理中代码冲突的情况</span><br><span class="line"></span><br><span class="line">gulp.task(&apos;lintCss&apos;, () =&gt; &#123;</span><br><span class="line">    return gulp</span><br><span class="line">        .src([&apos;assets/css/*.scss&apos;, &apos;assets/css/*/*.scss&apos;]) // 单路径：String，多路径：Array</span><br><span class="line">        .pipe(stylelint(&#123; // 调用 有点想node express 里面的use</span><br><span class="line">	        failAfterError: true,</span><br><span class="line">	        reportOutputDir: &apos;reports/lint&apos;,</span><br><span class="line">	        fix: true,</span><br><span class="line">            reporters: [</span><br><span class="line">                &#123;formatter: &apos;string&apos;, console: true&#125;,</span><br><span class="line">                &#123;formatter: &apos;json&apos;, save:&apos;text.txt&apos;, console:true&#125;           </span><br><span class="line">            ]，</span><br><span class="line">            debug: true</span><br><span class="line">        &#125;))</span><br><span class="line">        .pipe(gulp.dest(&apos;src&apos;)); // 只有在fix 设置为true 的时候加这项操作</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul></blockquote><h4 id="gulp-sass-和-gulp-sourcemaps-（sass编译，源映射）"><a href="#gulp-sass-和-gulp-sourcemaps-（sass编译，源映射）" class="headerlink" title="gulp-sass 和 gulp-sourcemaps （sass编译，源映射）"></a>gulp-sass 和 gulp-sourcemaps （sass编译，源映射）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var sass = require(&apos;gulp-sass&apos;); // 编译sass -&gt; css</span><br><span class="line">var sourcemaps = require(&apos;gulp-sourcemaps&apos;); // 将编译、压缩后的 css 显示成原始代码，映射到调试工具中</span><br><span class="line"></span><br><span class="line">// sass处理</span><br><span class="line">gulp.task(&apos;sass&apos;, [&apos;lintCss&apos;], () =&gt; &#123; // 第二个参数是依赖进程</span><br><span class="line">    return gulp.src(&apos;assets/css/*.scss&apos;)</span><br><span class="line">	    .pipe(sourcemaps.init()) //初始化</span><br><span class="line">        .pipe(sass().on(&apos;error&apos;, sass.logError)) // .pipe(sass。sync().on(&apos;error&apos;, sass.logError)) 同步编译</span><br><span class="line">        .pipe(sourcemaps.write(&apos;&apos;)) // 编写源映射</span><br><span class="line">        .pipe(gulp.dest(&apos;public/css&apos;))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="gulp-clean-css-（css压缩）"><a href="#gulp-clean-css-（css压缩）" class="headerlink" title="gulp-clean-css （css压缩）"></a>gulp-clean-css （css压缩）</h4><blockquote><p>用于压缩css文件，减少文件大小，并给引用的url添加版本号避免缓存</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">cleanCSS= require(&apos;gulp-clean-css&apos;)</span><br><span class="line">cssver = require(&apos;gulp-make-css-url-version&apos;); // 给css文件中的引用文件添加版本号（MD5），避免缓存</span><br><span class="line">参数：useDate : true 使用时间戳制作</span><br><span class="line">     assetsDir: __dirname + &apos;/public&apos; 在某些特定的情况下，指定公共目录来正确地计算MD5</span><br><span class="line"></span><br><span class="line">gulp.task(&apos;minifyCss&apos;, function () &#123;</span><br><span class="line">    gulp.src(&apos;src/css/*.css&apos;)</span><br><span class="line">	    .pipe(cssver())</span><br><span class="line">        .pipe(cleanCSS(&#123;</span><br><span class="line">            advanced: false,//类型：Boolean 默认：true [是否开启高级优化（合并选择器等）]</span><br><span class="line">            compatibility: &apos;ie7&apos;,//保留ie7及以下兼容写法 类型：String 默认：&apos;&apos;or&apos;*&apos; [启用兼容模式； &apos;ie7&apos;：IE7兼容模式，&apos;ie8&apos;：IE8兼容模式，&apos;*&apos;：IE9+兼容模式]</span><br><span class="line">            keepBreaks: true,//类型：Boolean 默认：false [是否保留换行]</span><br><span class="line">            keepSpecialComments: &apos;*&apos;</span><br><span class="line">            //保留所有特殊前缀 当你用autoprefixer生成的浏览器前缀，如果不加这个参数，有可能将会删除你的部分前缀</span><br><span class="line">        &#125;))</span><br><span class="line">        </span><br><span class="line">        .pipe(gulp.dest(&apos;dist/css&apos;));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="gulp-imagemin-（图片压缩）"><a href="#gulp-imagemin-（图片压缩）" class="headerlink" title="gulp-imagemin （图片压缩）"></a>gulp-imagemin （图片压缩）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const imagemin = require(&apos;gulp-imagemin&apos;)</span><br><span class="line">const pngquant = require(&apos;imagemin-pngquant&apos;) // 深度压缩png格式图片</span><br><span class="line"></span><br><span class="line">gulp.task(&apos;minifyImg&apos;, () =&gt; &#123;</span><br><span class="line">    return gulp.src([&apos;assets/img/*&apos;, &apos;assets/img/*/*&apos;])</span><br><span class="line">        .pipe(imagemin(&#123;</span><br><span class="line">            optimizationLevel: 5, //类型：Number  默认：3  取值范围：0-7（优化等级）</span><br><span class="line">            progressive: true, //类型：Boolean 默认：false 无损压缩jpg图片 </span><br><span class="line">            interlaced: true, //类型：Boolean 默认：false 隔行扫描gif进行渲染</span><br><span class="line">            multipass: true //类型：Boolean 默认：false 多次优化svg直到完全优化</span><br><span class="line">            svgoPlugins: [&#123;removeViewBox: false&#125;], //不要移除svg的viewbox属性 深度压缩时参数</span><br><span class="line">            use: [pngquant()] //使用pngquant深度压缩png图片的imagemin插件 深度压缩时参数</span><br><span class="line">        &#125;))</span><br><span class="line">        .pipe(gulp.dest(&apos;public/img&apos;))</span><br><span class="line">        .pipe(connect.reload()) // 配合gulp-connect使用， 可以捕获根目录下的子目录变化</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="gulp-clean-（清除文件-文件夹）"><a href="#gulp-clean-（清除文件-文件夹）" class="headerlink" title="gulp-clean （清除文件/文件夹）"></a>gulp-clean （清除文件/文件夹）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const clean = require(&apos;gulp-clean&apos;)</span><br><span class="line"></span><br><span class="line">// 删除文件及文件夹，在执行打包的时候，一般都需要先清理目标文件夹，以保证每次打包时，都是最新的文件</span><br><span class="line">gulp.task(&apos;cleanPublic&apos;, () =&gt; &#123;</span><br><span class="line">    return gulp.src([&apos;public/css&apos;, &apos;public/js&apos;, &apos;public/img&apos;], &#123;read: false&#125;) // read:false 阻止gulp读取文件的内容，并使这个任务更快。如果在同一条流中清除后需要文件及其内容，则不要将read选项设置为false</span><br><span class="line">        .pipe(clean(&#123;force: true&#125;)) //对于安全文件和文件夹，在当前工作目录之外，只能用option force设置为true</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="gulp-connect-（动态监控文件变化）"><a href="#gulp-connect-（动态监控文件变化）" class="headerlink" title="gulp-connect （动态监控文件变化）"></a>gulp-connect （动态监控文件变化）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">const connect = require(&apos;gulp-connect&apos;) // 可以开启多个服务</span><br><span class="line"></span><br><span class="line">gulp.task(&apos;connect1&apos;, () =&gt; &#123;</span><br><span class="line">    connect.server(&#123;</span><br><span class="line">        root: [&apos;public&apos;,&apos;img&apos;],  // 需要监控的根目录</span><br><span class="line">        host: 192.168.90.188, // IP地址</span><br><span class="line">        port: 3000, // 端口号</span><br><span class="line">        livereload: true   // 重新加载</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">gulp.task(&apos;connect2&apos;, () =&gt; &#123;</span><br><span class="line">    connect.server(&#123;</span><br><span class="line">        root: &apos;css&apos;,  // 需要监控的根目录</span><br><span class="line">        host: 192.168.90.188, // IP地址</span><br><span class="line">        port: 3001, // 端口号</span><br><span class="line">        livereload: true   // 重新加载</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 监听</span><br><span class="line">gulp.task(&apos;watch&apos;, () =&gt; &#123;</span><br><span class="line">    gulp.watch([&apos;assets/css/*.scss&apos;, &apos;assets/css/*/*.scss&apos;], [&apos;minifyCss&apos;]) // 参数1 ： 监听文件 ， 参数2 ： 所监听的文件发生改变后执行的任务 （原理很像发布订阅）</span><br><span class="line">    gulp.watch([&apos;assets/js/*.js&apos;, &apos;assets/js/*/*.js&apos;], [&apos;buildJs&apos;])</span><br><span class="line">    gulp.watch([&apos;assets/img/*&apos;, &apos;assets/img/*/*&apos;], [&apos;minifyImg&apos;])</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="gulp-postcss-插件平台-类似于webpack中的plugins"><a href="#gulp-postcss-插件平台-类似于webpack中的plugins" class="headerlink" title="gulp-postcss (插件平台) [类似于webpack中的plugins]"></a>gulp-postcss (插件平台) [类似于webpack中的plugins]</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">const postcss = require(&apos;gulp-postcss&apos;)</span><br><span class="line">const autoprefixer = require(&apos;autoprefixer&apos;) // 前缀补充</span><br><span class="line"></span><br><span class="line">gulp.task(&apos;postcss&apos;, [&apos;sass&apos;], () =&gt; &#123;</span><br><span class="line">    const plugins = [</span><br><span class="line">        autoprefixer(&#123;browsers: [&apos;last 2 versions&apos;, &apos;ie &gt;= 8&apos;, &apos;&gt; 5% in CN&apos;]&#125;) // 参数: [主流浏览器的最近2个版本，IE8以上，中国市场占有量大于5%]</span><br><span class="line">    ]</span><br><span class="line">    return gulp.src(&apos;public/css/*.css&apos;)</span><br><span class="line">        .pipe(sourcemaps.init())</span><br><span class="line">        .pipe(postcss(plugins)) // 参数是个Array</span><br><span class="line">        .pipe(sourcemaps.write(&apos;&apos;))</span><br><span class="line">        .pipe(gulp.dest(&apos;public/css&apos;))</span><br><span class="line">        .pipe(connect.reload())</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div><div class="article-footer"><blockquote class="mt-2x"><ul class="post-copyright list-unstyled"><li class="post-copyright-link hidden-xs"><strong>本文链接：</strong> <a href="http://yoursite.com/2018/06/17/gulp/" title="gulp" target="_blank" rel="external">http://yoursite.com/2018/06/17/gulp/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！</li></ul></blockquote><div class="panel panel-default panel-badger"><div class="panel-body"><figure class="media"><div class="media-left"><a href="https://github.com/YangBo29" target="_blank" class="img-burn thumb-sm visible-lg"><img src="/images/avat.jpg" class="img-rounded w-full" alt=""></a></div><div class="media-body"><h3 class="media-heading"><a href="https://github.com/YangBo29" target="_blank"><span class="text-dark">杨波</span><small class="ml-1x">人生总是要奋斗的</small></a></h3><div>个人介绍</div></div></figure></div></div></div></article><section id="comments"></section></div><nav class="bar bar-footer clearfix" data-stick-bottom><div class="bar-inner"><ul class="pager pull-left"><li class="prev"><a href="/2018/07/07/jQuery.cropper/" title="jQuery.cropper 插件"><i class="icon icon-angle-left" aria-hidden="true"></i>&nbsp;&nbsp;Newer</a></li><li class="next"><a href="/2017/11/26/regExp/" title="RegExp">Older&nbsp;&nbsp;<i class="icon icon-angle-right" aria-hidden="true"></i></a></li></ul><div class="bar-right"><div class="share-component" data-sites="weibo,qq" data-mobile-sites="weibo,qq,qzone"></div><div class="toggle-toc hidden-xs"><a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="Catalogue" role="button"><i class="text-collapsed icon icon-anchor"></i> <i class="text-in icon icon-close"></i></a></div></div></div></nav></main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter"><ul class="social-links"><li><a href="https://github.com/YangBo29" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="https://weibo.com/u/3809860910" target="_blank" title="Weibo" data-toggle="tooltip" data-placement="top"><i class="icon icon-weibo"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul><div class="copyright"><div class="publishby">Theme by <a href="https://github.com/cofess" target="_blank">cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.</div></div></footer><script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script><script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script src="/js/plugin.min.js"></script><script src="/js/application.js"></script><script>!function(T){var n={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},ROOT_URL:"/",CONTENT_URL:"/content.json"};T.INSIGHT_CONFIG=n}(window)</script><script src="/js/insight.js"></script><script defer src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script></body></html><!-- rebuild by neat -->